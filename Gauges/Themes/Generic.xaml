<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Gauges">
    <Style TargetType="{x:Type local:Gauge}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:Gauge}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" MinHeight="{TemplateBinding MinHeight}" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Text="{Binding Minimum, RelativeSource={RelativeSource TemplatedParent}, StringFormat='{}{0:F2}'}" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                        <TextBlock Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="2" Text="{Binding Maximum, RelativeSource={RelativeSource TemplatedParent}, StringFormat='{}{0:F2}'}" HorizontalAlignment="Center" VerticalAlignment="Top"/>

                        <TickBar x:Name="TopTick"  Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3"
                                SnapsToDevicePixels="True"
                                Placement="Top" Height="4" Visibility="Visible">
                            <TickBar.Fill>
                                <SolidColorBrush Color="Black" />
                            </TickBar.Fill>
                        </TickBar>
                        <Border x:Name="TrackBackground" 
                            Margin="0"
                            CornerRadius="2"
                            Height="4"
                            Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3"
                                
                            BorderThickness="1">
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <LinearGradientBrush.GradientStops>
                                        <GradientStopCollection>
                                            <GradientStop Color="Red" Offset="0.0" />
                                            <GradientStop Color="Red" Offset="0.25" />
                                            <GradientStop Color="Green" Offset="0.25" />
                                            <GradientStop Color="Green" Offset="0.75" />
                                            <GradientStop Color="Red" Offset="0.75" />
                                            <GradientStop Color="Red" Offset="1.0" />
                                        </GradientStopCollection>
                                    </LinearGradientBrush.GradientStops>
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <LinearGradientBrush.GradientStops>
                                        <GradientStopCollection>
                                            <GradientStop Color="Red" Offset="0.0" />
                                            <GradientStop Color="Red" Offset="0.25" />
                                            <GradientStop Color="Green" Offset="0.25" />
                                            <GradientStop Color="Green" Offset="0.75" />
                                            <GradientStop Color="Red" Offset="0.75" />
                                            <GradientStop Color="Red" Offset="1.0" />
                                        </GradientStopCollection>
                                    </LinearGradientBrush.GradientStops>
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>
                        <Grid x:Name="PART_Indicator" Grid.Row="0" Grid.RowSpan="3" Grid.Column="1" Grid.ColumnSpan="3">
                            <TextBlock Grid.Row="0" Text="{Binding Value, RelativeSource={RelativeSource TemplatedParent}, StringFormat='{}{0:F2}'}" HorizontalAlignment="Center" VerticalAlignment="Top"/>
                            <Ellipse  Width="10" Height="10" Fill="HotPink" VerticalAlignment="Bottom"/>
                        </Grid>
                        <!--<TickBar x:Name="BottomTick" 
                                SnapsToDevicePixels="True" 
                                Grid.Row="2" 
                                Fill="{TemplateBinding Foreground}"
                                Placement="Bottom"
                                Height="4"
                                Visibility="Visible" />-->
                    </Grid>
                    <!--<ControlTemplate.Triggers>
                        <Trigger Property="TickPlacement" Value="TopLeft">
                            <Setter TargetName="TopTick" Property="Visibility" Value="Visible" />
                        </Trigger>
                        <Trigger Property="TickPlacement" Value="BottomRight">
                            <Setter TargetName="BottomTick" Property="Visibility" Value="Visible" />
                        </Trigger>
                        <Trigger Property="TickPlacement" Value="Both">
                            <Setter TargetName="TopTick" Property="Visibility" Value="Visible" />
                            <Setter TargetName="BottomTick" Property="Visibility" Value="Visible" />
                        </Trigger>
                    </ControlTemplate.Triggers>-->
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
